{"created_at":"2019-07-12T04:21:59.267Z","project_data":{"code":"/**\n * Copyright(C), 2018-2038, KenRobot.com\n * FileName: sketch_jul12a.ino\n * Author: 啃萝卜\n * Create: 2019/07/21\n * Modify: 2019/07/21\n */\n\n#include <Kenblock.h>\n#include <Kenblock_4DigitalDisplay.h>\n#include <Kenblock_Motor.h>\n \nint alcoholSensor_A_0 = A7;\nFourDigitalDisplay disp_0(PD3);\nint infraredSwitch_0 = 2;\nint infraredSwitch_1 = A3;\nint led_0 = A0;\nint led_1 = A1;\nMotor motor_1(MA);\nint peopleInHouse;\nuint32_t secretKey;\nuint32_t inputtedNumber;\nbool personDetected0;\nbool personDetected1;\nbool infraActive0;\nbool infraActive1;\nbool openGateWhenInProximity;\nbool alcoholMode;\nvoid handleInfra0() {\n    if (digitalRead(infraredSwitch_0) == HIGH) {\n        infraActive0 = false;\n    } else {\n        if (infraActive0 == false) {\n            personDetected0 = !personDetected0;\n            if ((personDetected0) && (personDetected1)) {\n                personDetected0 = false;\n                personDetected1 = false;\n                if (peopleInHouse > 0) {\n                    peopleInHouse = (peopleInHouse - 1);\n                }\n            }\n        }\n        infraActive0 = true;\n    }\n}\nvoid handleInfra1() {\n    if (digitalRead(infraredSwitch_1) == HIGH) {\n        infraActive1 = false;\n    } else {\n        if (infraActive1 == false) {\n            personDetected1 = !personDetected1;\n            if ((personDetected0) && (personDetected1)) {\n                personDetected0 = false;\n                personDetected1 = false;\n                peopleInHouse = (peopleInHouse + 1);\n                disp_0.display(peopleInHouse);\n                powerSwitch();\n                if (openGateWhenInProximity) {\n                    Serial.write(50);\n                    openGateWhenInProximity = false;\n                    gateOpen(true);\n                    delay(6000);\n                    gateOpen(false);\n                }\n            }\n        }\n        infraActive1 = true;\n    }\n}\nvoid gateOpen(bool open) {\n    if (open) {\n        motor_1.run(abs(100));\n        motor_1.run(-abs(100));\n    } else {\n        motor_1.run(-abs(100));\n        motor_1.run(abs(100));\n    }\n    delay(300);\n    motor_1.stop();\n    motor_1.stop();\n}\nvoid powerSwitch() {\n    if (peopleInHouse > 0) {\n        digitalWrite(led_0, HIGH);\n    } else {\n        digitalWrite(led_0, LOW);\n    }\n}\nvoid reset() {\n    peopleInHouse = 0;\n    infraActive0 = false;\n    infraActive1 = false;\n    personDetected0 = false;\n    personDetected1 = false;\n    openGateWhenInProximity = false;\n    disp_0.clearDisplay();\n    digitalWrite(led_1, LOW);\n    digitalWrite(led_0, LOW);\n}\n\nvoid setup() {\n    Serial.begin(9600);\n    pinMode(infraredSwitch_0, INPUT_PULLUP);\n    pinMode(infraredSwitch_1, INPUT_PULLUP);\n    pinMode(led_0, OUTPUT);\n    pinMode(led_1, OUTPUT);\n    peopleInHouse = 0;\n    secretKey = 56781;\n    inputtedNumber = 0;\n    infraActive0 = false;\n    infraActive1 = false;\n    personDetected0 = false;\n    personDetected1 = false;\n    openGateWhenInProximity = false;\n    alcoholMode = true;\n}\n\nvoid loop() {\n    if (alcoholMode) {\n        disp_0.display((analogRead(alcoholSensor_A_0) % 100));\n        if ((analogRead(alcoholSensor_A_0) % 100) > 30) {\n            digitalWrite(led_0, HIGH);\n            digitalWrite(led_1, LOW);\n        } else {\n            digitalWrite(led_1, HIGH);\n            digitalWrite(led_0, LOW);\n        }\n    } else {\n        handleInfra0();\n        handleInfra1();\n        powerSwitch();\n        disp_0.display(peopleInHouse);\n    }\n    if (Serial.available() > 0) {\n        int value = Serial.read();\n        inputtedNumber = (inputtedNumber * 10) + (value - '0');\n        if (inputtedNumber >= 10000) {\n            if (inputtedNumber == 10002) {\n                openGateWhenInProximity = true;\n                Serial.write(52);\n            } else if (inputtedNumber == secretKey) {\n                if (alcoholMode) {\n                    Serial.write(53);\n                } else {\n                    Serial.write(54);\n                }\n            } else if (inputtedNumber == 10003) {\n                alcoholMode = !alcoholMode;\n                reset();\n                Serial.write(51);\n            } else if (inputtedNumber == 10004) {\n                Serial.write(50);\n                gateOpen(true);\n                delay(6000);\n                gateOpen(false);\n            } else {\n                Serial.write(48);\n            }\n            inputtedNumber = 0;\n        }\n    }\n\n}","hardware":{"board":"Kenblock-NEO-328P","components":[{"endpoints":{"s":{"type":"digital ken-digital","uid":"DDhjlS"}},"name":"ken_infraredSwitch","uid":"ONeNxX","x":6.8,"y":80},{"endpoints":{"s":{"type":"ken-2P-digital","uid":"ZNouOD"}},"name":"ken_display","uid":"cKlbN7","x":67.4,"y":81.1},{"endpoints":{"s":{"type":"digital ken-digital","uid":"KrnTJd"}},"name":"ken_infraredSwitch","uid":"jba225","x":39.3,"y":81.1},{"endpoints":{"s":{"type":"serial","uid":"CX7oc6"}},"name":"ken_bluetooth","uid":"k10DHT","x":21.3,"y":5.3},{"endpoints":{"s":{"type":"digital analog-out ken-digital","uid":"28sxls"}},"name":"ken_led","uid":"YXBdvl","x":32.2,"y":7.9},{"endpoints":{"s":{"type":"analog-in","uid":"puaIB2"}},"name":"ken_alcoholA","uid":"R1fZGd","x":9,"y":6.4},{"endpoints":{"s":{"type":"digital analog-out ken-digital","uid":"WhVi9q"}},"name":"ken_led","uid":"7o45cH","x":26.9,"y":3},{"endpoints":{"s":{"type":"ken-motor","uid":"bo3zV4"}},"name":"ken_motor","uid":"tjidid","x":52.6,"y":3.2}],"connections":[{"sourceUid":"ZNouOD","targetUid":"sG9ad6"},{"sourceUid":"DDhjlS","targetUid":"FCH8YB"},{"sourceUid":"CX7oc6","targetUid":"93jZ2Z"},{"sourceUid":"28sxls","targetUid":"3IGLLR"},{"sourceUid":"puaIB2","targetUid":"KsETSl"},{"sourceUid":"WhVi9q","targetUid":"LwMHua"},{"sourceUid":"bo3zV4","targetUid":"r5uoXa"},{"sourceUid":"KrnTJd","targetUid":"FiPm07"}]},"mode":"block","software":{"global":{"children":[{"children":[],"content":[{"id":"NAME","type":"var-input","value":"peopleInHouse"},{"id":"TYPE","type":"string-input","value":"int"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"secretKey"},{"id":"TYPE","type":"string-input","value":"uint32_t"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"inputtedNumber"},{"id":"TYPE","type":"string-input","value":"uint32_t"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"personDetected0"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"personDetected1"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"infraActive0"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"infraActive1"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"openGateWhenInProximity"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[],"content":[{"id":"NAME","type":"var-input","value":"alcoholMode"},{"id":"TYPE","type":"string-input","value":"bool"}],"enable":true,"name":"declareVariableAdvanced2"},{"children":[{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"INFRARED_SWITCH","type":"dynamic-select","value":"infraredSwitch_0"}],"enable":true,"name":"ken_infraredSwitchRead"}},{"id":"OPERATOR","type":"static-select","value":"=="},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"HIGH"}],"enable":true,"name":"highLow"}}],"enable":true,"name":"if"},{"children":[{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"OP","type":"static-select","value":"!"},{"blockInputId":"EXP","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected0"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"not"}}],"enable":true,"name":"setVariable"},{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"peopleInHouse"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"-"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"1"}],"enable":true,"name":"number"}}],"enable":true,"name":"basicOperations"}}],"enable":true,"name":"setVariable"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":">"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"0"}],"enable":true,"name":"number"}}],"enable":true,"name":"equalityOperations"}}],"enable":true,"name":"ifAdvanced"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected0"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"&&"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected1"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"logicOperations"}}],"enable":true,"name":"ifAdvanced"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"infraActive0"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"=="},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"if"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"true"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"}],"content":[],"enable":true,"name":"else"}],"content":[{"id":"FUNCNAME","type":"var-input","value":"handleInfra0"}],"enable":true,"name":"voidFunction"},{"children":[{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"INFRARED_SWITCH","type":"dynamic-select","value":"infraredSwitch_1"}],"enable":true,"name":"ken_infraredSwitchRead"}},{"id":"OPERATOR","type":"static-select","value":"=="},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"HIGH"}],"enable":true,"name":"highLow"}}],"enable":true,"name":"if"},{"children":[{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"OP","type":"static-select","value":"!"},{"blockInputId":"EXP","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected1"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"not"}}],"enable":true,"name":"setVariable"},{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"peopleInHouse"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"+"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"1"}],"enable":true,"name":"number"}}],"enable":true,"name":"basicOperations"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"DISPLAY","type":"dynamic-select","value":"disp_0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"ken_displayShow"},{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"powerSwitch"}],"enable":true,"name":"invokeFunction"},{"children":[{"children":[],"content":[{"id":"CODE","type":"code-input","value":"Serial.write(50);"}],"enable":true,"name":"code"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"openGateWhenClose"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"gateOpenClose"},{"blockInputId":"ARGS","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"true"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"invokeFunctionWithArguments"},{"children":[],"content":[{"id":"TIME","type":"number-input","value":"6000"},{"id":"OP","type":"static-select","value":"delay"}],"enable":true,"name":"wait"},{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"gateOpenClose"},{"blockInputId":"ARGS","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"invokeFunctionWithArguments"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"openGateWhenClose"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"ifAdvanced"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected0"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"&&"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"personDetected1"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"logicOperations"}}],"enable":true,"name":"ifAdvanced"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"infraActive1"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":"=="},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"if"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"true"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"}],"content":[],"enable":true,"name":"else"}],"content":[{"id":"FUNCNAME","type":"var-input","value":"handleInfra1"}],"enable":true,"name":"voidFunction"},{"children":[{"children":[{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_0"},{"id":"DIR","type":"static-select","value":"true"},{"blockInputId":"SPEED","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"ken_motorRun"},{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_1"},{"id":"DIR","type":"static-select","value":"false"},{"blockInputId":"SPEED","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"ken_motorRun"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"open"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"ifAdvanced"},{"children":[{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_0"},{"id":"DIR","type":"static-select","value":"false"},{"blockInputId":"SPEED","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"ken_motorRun"},{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_1"},{"id":"DIR","type":"static-select","value":"true"},{"blockInputId":"SPEED","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"ken_motorRun"}],"content":[],"enable":true,"name":"else"},{"children":[],"content":[{"id":"TIME","type":"number-input","value":"300"},{"id":"OP","type":"static-select","value":"delay"}],"enable":true,"name":"wait"},{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_0"}],"enable":true,"name":"ken_motorStop"},{"children":[],"content":[{"id":"MOTOR","type":"dynamic-select","value":"motor_1"}],"enable":true,"name":"ken_motorStop"}],"content":[{"id":"FUNCNAME","type":"var-input","value":"gateOpen"},{"blockInputId":"ARGS","type":"block-input","value":{"children":[],"content":[{"id":"TYPE","type":"static-select","value":"bool"},{"id":"VARNAME","type":"var-input","value":"open"}],"enable":true,"name":"argument"}}],"enable":true,"name":"voidFunctionWithArguments"},{"children":[{"children":[{"children":[],"content":[{"id":"OP","type":"static-select","value":"HIGH"},{"id":"LED","type":"dynamic-select","value":"led_0"}],"enable":true,"name":"ken_ledDigitalWrite"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}},{"id":"OPERATOR","type":"static-select","value":">"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"0"}],"enable":true,"name":"number"}}],"enable":true,"name":"if"},{"children":[{"children":[],"content":[{"id":"OP","type":"static-select","value":"LOW"},{"id":"LED","type":"dynamic-select","value":"led_0"}],"enable":true,"name":"ken_ledDigitalWrite"}],"content":[],"enable":true,"name":"else"}],"content":[{"id":"FUNCNAME","type":"var-input","value":"powerSwitch"}],"enable":true,"name":"voidFunction"},{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"peopleInHouse"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"0"}],"enable":true,"name":"number"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"openGateWhenClose"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"DISPLAY","type":"dynamic-select","value":"disp_0"}],"enable":true,"name":"ken_displayClean"},{"children":[],"content":[{"id":"OP","type":"static-select","value":"LOW"},{"id":"LED","type":"dynamic-select","value":"led_1"}],"enable":true,"name":"ken_ledDigitalWrite"},{"children":[],"content":[{"id":"OP","type":"static-select","value":"LOW"},{"id":"LED","type":"dynamic-select","value":"led_0"}],"enable":true,"name":"ken_ledDigitalWrite"}],"content":[{"id":"FUNCNAME","type":"var-input","value":"reset"}],"enable":true,"name":"voidFunction"}],"content":[],"enable":true,"name":"group"},"loop":{"children":[{"children":[{"children":[],"content":[{"id":"DISPLAY","type":"dynamic-select","value":"disp_0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"ALCOHOL","type":"dynamic-select","value":"alcoholSensor_A_0"}],"enable":true,"name":"ken_alcoholARead"}},{"id":"OPERATOR","type":"static-select","value":"%"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"basicOperations"}}],"enable":true,"name":"ken_displayShow"},{"children":[{"children":[],"content":[{"id":"OP","type":"static-select","value":"HIGH"},{"id":"LED","type":"dynamic-select","value":"led_0"}],"enable":true,"name":"ken_ledDigitalWrite"},{"children":[],"content":[{"id":"OP","type":"static-select","value":"LOW"},{"id":"LED","type":"dynamic-select","value":"led_1"}],"enable":true,"name":"ken_ledDigitalWrite"}],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"blockInputId":"ARG1","type":"block-input","value":{"children":[],"content":[{"id":"ALCOHOL","type":"dynamic-select","value":"alcoholSensor_A_0"}],"enable":true,"name":"ken_alcoholARead"}},{"id":"OPERATOR","type":"static-select","value":"%"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"100"}],"enable":true,"name":"number"}}],"enable":true,"name":"basicOperations"}},{"id":"OPERATOR","type":"static-select","value":">"},{"blockInputId":"ARG2","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"30"}],"enable":true,"name":"number"}}],"enable":true,"name":"if"},{"children":[{"children":[],"content":[{"id":"OP","type":"static-select","value":"HIGH"},{"id":"LED","type":"dynamic-select","value":"led_1"}],"enable":true,"name":"ken_ledDigitalWrite"},{"children":[],"content":[{"id":"OP","type":"static-select","value":"LOW"},{"id":"LED","type":"dynamic-select","value":"led_0"}],"enable":true,"name":"ken_ledDigitalWrite"}],"content":[],"enable":true,"name":"else"}],"content":[{"blockInputId":"CONDITION","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"alcoholMode"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"ifAdvanced"},{"children":[{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"toggleInfra0"}],"enable":true,"name":"invokeFunction"},{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"handleInfra1"}],"enable":true,"name":"invokeFunction"},{"children":[],"content":[{"id":"FUNCTION","type":"dynamic-select","value":"powerSwitch"}],"enable":true,"name":"invokeFunction"},{"children":[],"content":[{"id":"DISPLAY","type":"dynamic-select","value":"disp_0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VAR","type":"dynamic-select","value":"peopleInHouse"}],"enable":true,"name":"selectVariable"}}],"enable":true,"name":"ken_displayShow"}],"content":[],"enable":true,"name":"else"},{"children":[],"content":[{"id":"CODE","type":"code-input","value":"if (Serial.available() > 0) {\n        int value = Serial.read();\n        inputtedNumber = (inputtedNumber * 10) + (value - '0');\n        if (inputtedNumber >= 10000) {\n            if (inputtedNumber == 10002) {\n                openGateWhenInProximity = true;\n                Serial.write(52);\n            } else if (inputtedNumber == secretKey) {\nif (alcoholMode){\nSerial.write(53);\n} else {\nSerial.write(54);\n}\n            } else if (inputtedNumber == 10003){\nalcoholMode = !alcoholMode;\nreset();\n                Serial.write(51);\n            } else if (inputtedNumber == 10004) {\nSerial.write(50);\ngateOpen(true);\ndelay(6000);\ngateOpen(false);\n} else {\nSerial.write(48);\n}\n        inputtedNumber = 0;\n        }\n    }"}],"enable":true,"name":"code"}],"content":[],"enable":true,"name":"group"},"setup":{"children":[{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"peopleInHouse"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"0"}],"enable":true,"name":"number"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"secretKey"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"56781"}],"enable":true,"name":"number"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"inputtedNumber"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"VALUE","type":"number-input","value":"0"}],"enable":true,"name":"number"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"infraActive1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected0"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"personDetected1"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"openGateWhenClose"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"false"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"},{"children":[],"content":[{"id":"NAME","type":"dynamic-select","value":"alcoholMode"},{"blockInputId":"VALUE","type":"block-input","value":{"children":[],"content":[{"id":"STATE","type":"static-select","value":"true"}],"enable":true,"name":"boolean"}}],"enable":true,"name":"setVariable"}],"content":[],"enable":true,"name":"group"}}},"project_name":"sketch_jul12a","project_type":"local","updated_at":1563642867,"type":"kenblock"}
